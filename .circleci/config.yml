---
# https://rtfm.co.ua/circleci-obzor-continuous-integration-servisa/
# https://circleci.com/orbs/registry/orb/orbss/ansible-ssh#commands-ansible-playbook
version: 2
jobs:
  build:
    # docker:
    #   - image: williamyeh/ansible:ubuntu18.04
    machine:
      image: circleci/classic:edge
    resource_class: small
    working_directory: ~/.ansible/roles/ansible-role-install-snap
    steps:
      - checkout
      - run:
          name: Ansible run test
          command: |
            apt update
            apt install -y software-properties-common
            apt-add-repository --yes --update ppa:ansible/ansible
            apt install -y ansible
            ansible-playbook -i "localhost," -c local tests/test.yml -vvv
