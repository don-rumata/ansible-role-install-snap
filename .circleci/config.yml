---
# https://rtfm.co.ua/circleci-obzor-continuous-integration-servisa/
# https://circleci.com/orbs/registry/orb/orbss/ansible-ssh#commands-ansible-playbook
version: 2
jobs:
  build:
    docker:
      - image: williamyeh/ansible:ubuntu18.04
    # machine:
    #   image: circleci/classic:edge
    resource_class: small
    # resource_class: medium
    working_directory: ~/.ansible/roles/ansible-role-install-snap
    steps:
      - checkout
      - run:
          name: Ansible run test
          command: |
            sudo apt update
            sudo apt install -y software-properties-common
            sudo apt-add-repository --yes --update ppa:ansible/ansible
            sudo apt install -y ansible
            ansible-playbook -i "localhost," -c local tests/test.yml -vvv
