---
# https://rtfm.co.ua/circleci-obzor-continuous-integration-servisa/
# https://circleci.com/orbs/registry/orb/orbss/ansible-ssh#commands-ansible-playbook
# https://circleci.com/docs/2.0/docker-image-tags.json
version: 2.1

executors:

  from-circlci-ubuntu-18-04:
    resource_class: small
    docker:
      - image: circleci/buildpack-deps:18.04

jobs:

  run-ansible-playbook-test:
    executor: from-circlci-ubuntu-18-04
    working_directory: ~/.ansible/roles/ansible-role-install-snap
    steps:
      - checkout
      - run:
          name: Run Ansible test
          command: |
            wget -O - https://raw.githubusercontent.com/don-rumata/stuff-4-ansible-roles/master/install-ansible-4-ubuntu.sh | bash
            ansible-playbook -i "localhost," -c local tests/test.yml -vvv

workflows:
  simple-run-test:
    jobs:
      - run-ansible-playbook-test
